COMPLETE RAW UNDISECTED SIDEBAR

import React, { useState } from "react";
import { NavLink, useLocation } from "react-router-dom";
import {
  TbMenu2,
  TbReportMoney,
  TbFilePlus,
  TbReceiptRefund,
  TbHome,
  TbUsers,
  TbBoxSeam,
  TbTruckDelivery,
  TbFileDescription,
  TbAddressBook,
  TbSettings,
  TbLogout2,
} from "react-icons/tb";
import { MdDownloading } from "react-icons/md";
import philvetsLogo from "../assets/philvets.png";

const Sidebar = () => {
  const [isCollapsed, setIsCollapsed] = useState(false);
  const [isDropdownOpen, setIsDropdownOpen] = useState(false);
  const [isPurchasesHovered, setIsPurchasesHovered] = useState(false);
  let dropdownTimeout; // Define a variable to hold the timeout ID
  const location = useLocation();

  const toggleCollapse = () => {
    setIsCollapsed(!isCollapsed);
  };

  const toggleDropdown = () => {
    setIsDropdownOpen(true);
    setIsPurchasesHovered(true); // Keep "Purchases" link in a hovered state
  };

  const closeDropdown = () => {
    // Use setTimeout to delay the execution of closeDropdown by half a second
    dropdownTimeout = setTimeout(() => {
      setIsDropdownOpen(false);
      setIsPurchasesHovered(false); // Remove hover state when dropdown is closed
    }, 50); // Half a second delay
  };

  const cancelCloseDropdown = () => {
    // Cancel the scheduled timeout when the mouse enters the dropdown
    clearTimeout(dropdownTimeout);
  };

  // Check if the current location pathname matches any of the submenus under Purchases
  const isPurchasesActive =
    location.pathname.includes("/admin/purorder") ||
    location.pathname.includes("/admin/purreceiving") ||
    location.pathname.includes("/admin/purreturn");

  return (
    <div
      className={`sidebar bg-cyan-600 text-white ${
        isCollapsed ? "w-100" : "w-52"
      } flex flex-col ${isCollapsed ? "collapsed" : ""} ${
        isCollapsed ? "collapsed-transition" : "" // Add collapsed-transition class if sidebar is collapsed
      }`}
    >
      <div className="flex items-center justify-between px-3 pt-3 pb-3 sidebar-header">
        {!isCollapsed && (
          <div className="flex items-center logo">
            <img
              src={philvetsLogo}
              alt="PHILVETS Logo"
              className="pb-[9px] ml-2 w-auto h-[50px] mr-2 brightness-110 saturate-125"
            />
            
          </div>
        )}
        <button className="toggle-menu" onClick={toggleCollapse}>
          <TbMenu2 className="ml-[12.5px] w-[20px] h-auto" />
        </button>
      </div>

      <div className="flex-1 px-4 overflow-y-auto sidebar-content">


        
        <NavLink
          to="/admin/dashboard"
          className="flex items-center p-2 mb-1 rounded-md sidebar-link hover:bg-cyan-700 hover:text-white"
          activeClassName="bg-cyan-800"
        >
          <TbHome className="w-5 h-5" />
          {!isCollapsed && <span className="ml-2 text-[15px]">Dashboard</span>}
        </NavLink>

        <div className="relative" onMouseLeave={closeDropdown}>
          <div
            className={`sidebar-link flex items-center mb-1 ${
              (isPurchasesHovered || isDropdownOpen || isPurchasesActive) &&
              "bg-cyan-800 text-white"
            } ${(!isPurchasesHovered &&
              !isDropdownOpen &&
              !isPurchasesActive) &&
              "hover:bg-cyan-800 hover:text-white"} rounded-md p-2`}
            onMouseEnter={toggleDropdown}
          >
            <TbReportMoney className="w-5 h-5" />
            {!isCollapsed && (
              <span className="ml-2 text-[14px]">Purchases</span>
            )}
          </div>
          {isDropdownOpen && (
            <div
              className="absolute top-full left-0 bg-cyan-700 text-white rounded-md mt-1 p-1 ml-[-4.2px] shadow-2xl z-50" // Add z-index property
              onMouseEnter={cancelCloseDropdown} // Cancel the scheduled timeout when the mouse enters the dropdown
            >
              <NavLink
                to="/admin/purorder"
                className="flex items-center p-2 rounded-md sidebar-link hover:bg-cyan-600 hover:text-white"
                activeClassName="bg-cyan-800"
              >
                <TbFilePlus className="w-5 h-5" />
                {!isCollapsed && (
                  <span className="ml-2 text-[14px]">Purchase Order</span>
                )}
              </NavLink>

              <NavLink
                to="/admin/purreceiving"
                className="flex items-center p-2 rounded-md sidebar-link hover:bg-cyan-600 hover:text-white"
                activeClassName="bg-cyan-800"
              >
                <MdDownloading className="w-5 h-5" />
                {!isCollapsed && (
                  <span className="ml-2 text-[14px]">Receiving</span>
                )}
              </NavLink>

              <NavLink
                to="/admin/purreturn"
                className="flex items-center p-2 rounded-md sidebar-link hover:bg-cyan-600 hover:text-white"
                activeClassName="bg-cyan-800"
              >
                <TbReceiptRefund className="w-5 h-5" />
                {!isCollapsed && (
                  <span className="ml-2 text-[14.5px]">Purchase Return</span>
                )}
              </NavLink>
            </div>
          )}
        </div>

        <NavLink
          to="/admin/inventory"
          className="flex items-center p-2 mb-1 rounded-md sidebar-link hover:bg-cyan-700 hover:text-white"
          activeClassName="bg-cyan-800"
        >
          <TbBoxSeam className="w-5 h-5" />
          {!isCollapsed && <span className="ml-2 text-[15px]">Inventory</span>}
        </NavLink>

        <NavLink
          to="/admin/customers"
          className="flex items-center p-2 mb-1 rounded-md sidebar-link hover:bg-cyan-700 hover:text-white"
          activeClassName="bg-cyan-800"
        >
          <TbAddressBook className="w-5 h-5" />
          {!isCollapsed && <span className="ml-2 text-[15px]">Customers</span>}
        </NavLink>

        <NavLink
          to="/admin/suppliers"
          className="flex items-center p-2 mb-1 rounded-md sidebar-link hover:bg-cyan-700 hover:text-white"
          activeClassName="bg-cyan-800"
        >
          <TbTruckDelivery className="w-5 h-5" />
          {!isCollapsed && <span className="ml-2 text-[15px]">Suppliers</span>}
        </NavLink>

        <NavLink
          to="/admin/reports"
          className="flex items-center p-2 mb-1 rounded-md sidebar-link hover:bg-cyan-700 hover:text-white"
          activeClassName="bg-cyan-800"
        >
          <TbFileDescription className="w-5 h-5" />
          {!isCollapsed && <span className="ml-2 text-[15px]">Reports</span>}
        </NavLink>

        <NavLink
          to="/admin/staff"
          className="flex items-center p-2 mb-1 rounded-md sidebar-link hover:bg-cyan-700 hover:text-white"
          activeClassName="bg-cyan-800"
        >
          <TbUsers className="w-5 h-5" />
          {!isCollapsed && <span className="ml-2 text-[15px]">Staffs</span>}
        </NavLink>
      </div>

      <div className="px-4 pb-1 sidebar-footer">
        <NavLink
          to="/admin/settings"
          className="flex items-center p-2 mb-1 rounded-md sidebar-link hover:bg-cyan-700 hover:text-white"
          activeClassName="bg-cyan-800"
        >
          <TbSettings className="w-5 h-5" />
          {!isCollapsed && <span className="ml-2 text-[15px]">Settings</span>}
        </NavLink>

        <NavLink
          to="/login"
          className="flex items-center p-2 rounded-md sidebar-link hover:bg-cyan-700 hover:text-white"
          activeClassName="bg-cyan-800"
        >
          <TbLogout2 className="w-5 h-5" />
          {!isCollapsed && <span className="ml-2 text-[15px]">Logout</span>}
        </NavLink>
      </div>
    </div>
  );
};

export default Sidebar;
